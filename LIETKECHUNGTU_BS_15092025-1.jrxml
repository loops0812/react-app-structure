<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
              name="LIETKECHUNGTU_BS_15092025-1" 
              pageWidth="842" 
              pageHeight="595" 
              orientation="Landscape" 
              columnWidth="802" 
              leftMargin="20" 
              rightMargin="20" 
              topMargin="20" 
              bottomMargin="20">

    <!-- Properties -->
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="One Empty Record"/>
    <property name="com.jaspersoft.studio.unit." value="pixel"/>
    <property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>

    <!-- Fields -->
    <field name="stb" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.label" value="STB"/>
    </field>
    <field name="tenKhachHang" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.label" value="Tên Khách Hàng"/>
    </field>
    <field name="diaChi" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.label" value="Địa Chỉ"/>
    </field>
    <field name="soTien" class="java.math.BigDecimal">
        <property name="com.jaspersoft.studio.field.label" value="Số Tiền"/>
    </field>
    <field name="ngayChungTu" class="java.sql.Date">
        <property name="com.jaspersoft.studio.field.label" value="Ngày Chứng Từ"/>
    </field>

    <!-- Variables -->
    <variable name="groupSTT" class="java.lang.Integer" resetType="Group" resetGroup="GroupStb" calculation="Count">
        <variableExpression><![CDATA[1]]></variableExpression>
        <initialValueExpression><![CDATA[0]]></initialValueExpression>
    </variable>

    <variable name="totalAmount" class="java.math.BigDecimal" resetType="Report" calculation="Sum">
        <variableExpression><![CDATA[$F{soTien}]]></variableExpression>
        <initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
    </variable>

    <!-- Groups -->
    <group name="GroupStb" isStartNewPage="false" isResetPageNumber="false" isReprintHeaderOnEachPage="false" minHeightToStartNewPage="0">
        <groupExpression><![CDATA[$F{stb}]]></groupExpression>
        <groupHeader>
            <band height="30" splitType="Stretch">
                <rectangle>
                    <reportElement x="0" y="0" width="802" height="30" backcolor="#E8E8E8"/>
                    <graphicElement>
                        <pen lineWidth="0.5"/>
                    </graphicElement>
                </rectangle>
                <textField isStretchWithOverflow="true">
                    <reportElement x="0" y="5" width="60" height="20" isPrintRepeatedValues="false"/>
                    <box>
                        <pen lineWidth="0.5"/>
                        <topPen lineWidth="0.5"/>
                        <leftPen lineWidth="0.5"/>
                        <bottomPen lineWidth="0.5"/>
                        <rightPen lineWidth="0.5"/>
                    </box>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Arial" size="10" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{groupSTT}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement x="60" y="5" width="120" height="20" isPrintRepeatedValues="false"/>
                    <box>
                        <pen lineWidth="0.5"/>
                        <topPen lineWidth="0.5"/>
                        <leftPen lineWidth="0.5"/>
                        <bottomPen lineWidth="0.5"/>
                        <rightPen lineWidth="0.5"/>
                    </box>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Arial" size="10" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{stb}]]></textFieldExpression>
                </textField>
                <!-- Header labels for other columns -->
                <staticText>
                    <reportElement x="180" y="5" width="200" height="20"/>
                    <box>
                        <pen lineWidth="0.5"/>
                        <topPen lineWidth="0.5"/>
                        <leftPen lineWidth="0.5"/>
                        <bottomPen lineWidth="0.5"/>
                        <rightPen lineWidth="0.5"/>
                    </box>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Arial" size="10" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Tên Khách Hàng]]></text>
                </staticText>
                <staticText>
                    <reportElement x="380" y="5" width="200" height="20"/>
                    <box>
                        <pen lineWidth="0.5"/>
                        <topPen lineWidth="0.5"/>
                        <leftPen lineWidth="0.5"/>
                        <bottomPen lineWidth="0.5"/>
                        <rightPen lineWidth="0.5"/>
                    </box>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Arial" size="10" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Địa Chỉ]]></text>
                </staticText>
                <staticText>
                    <reportElement x="580" y="5" width="100" height="20"/>
                    <box>
                        <pen lineWidth="0.5"/>
                        <topPen lineWidth="0.5"/>
                        <leftPen lineWidth="0.5"/>
                        <bottomPen lineWidth="0.5"/>
                        <rightPen lineWidth="0.5"/>
                    </box>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Arial" size="10" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Số Tiền]]></text>
                </staticText>
                <staticText>
                    <reportElement x="680" y="5" width="122" height="20"/>
                    <box>
                        <pen lineWidth="0.5"/>
                        <topPen lineWidth="0.5"/>
                        <leftPen lineWidth="0.5"/>
                        <bottomPen lineWidth="0.5"/>
                        <rightPen lineWidth="0.5"/>
                    </box>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Arial" size="10" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Ngày Chứng Từ]]></text>
                </staticText>
            </band>
        </groupHeader>
        <groupFooter>
            <band height="5"/>
        </groupFooter>
    </group>

    <!-- Title -->
    <title>
        <band height="50" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="10" width="802" height="30"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Arial" size="16" isBold="true"/>
                </textElement>
                <text><![CDATA[LIỆT KÊ CHỨNG TỪ - BẢNG SỐ]]></text>
            </staticText>
        </band>
    </title>

    <!-- Page Header -->
    <pageHeader>
        <band height="10" splitType="Stretch"/>
    </pageHeader>

    <!-- Column Header -->
    <columnHeader>
        <band height="5" splitType="Stretch"/>
    </columnHeader>

    <!-- Detail Band -->
    <detail>
        <band height="25" splitType="Stretch">
            <!-- Empty STT and STB columns (merged in group header) -->
            <rectangle>
                <reportElement x="0" y="0" width="60" height="25" backcolor="#FFFFFF"/>
                <graphicElement>
                    <pen lineWidth="0.5"/>
                </graphicElement>
            </rectangle>
            <rectangle>
                <reportElement x="60" y="0" width="120" height="25" backcolor="#FFFFFF"/>
                <graphicElement>
                    <pen lineWidth="0.5"/>
                </graphicElement>
            </rectangle>
            
            <!-- Other field data -->
            <textField isStretchWithOverflow="true">
                <reportElement x="180" y="0" width="200" height="25"/>
                <box>
                    <pen lineWidth="0.5"/>
                    <topPen lineWidth="0.5"/>
                    <leftPen lineWidth="0.5"/>
                    <bottomPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="Arial" size="9"/>
                    <paragraph leftIndent="5"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{tenKhachHang} != null ? $F{tenKhachHang} : ""]]></textFieldExpression>
            </textField>
            
            <textField isStretchWithOverflow="true">
                <reportElement x="380" y="0" width="200" height="25"/>
                <box>
                    <pen lineWidth="0.5"/>
                    <topPen lineWidth="0.5"/>
                    <leftPen lineWidth="0.5"/>
                    <bottomPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font fontName="Arial" size="9"/>
                    <paragraph leftIndent="5"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{diaChi} != null ? $F{diaChi} : ""]]></textFieldExpression>
            </textField>
            
            <textField isStretchWithOverflow="true" pattern="#,##0.00">
                <reportElement x="580" y="0" width="100" height="25"/>
                <box>
                    <pen lineWidth="0.5"/>
                    <topPen lineWidth="0.5"/>
                    <leftPen lineWidth="0.5"/>
                    <bottomPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Arial" size="9"/>
                    <paragraph rightIndent="5"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{soTien} != null ? $F{soTien} : new BigDecimal(0)]]></textFieldExpression>
            </textField>
            
            <textField isStretchWithOverflow="true" pattern="dd/MM/yyyy">
                <reportElement x="680" y="0" width="122" height="25"/>
                <box>
                    <pen lineWidth="0.5"/>
                    <topPen lineWidth="0.5"/>
                    <leftPen lineWidth="0.5"/>
                    <bottomPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Arial" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ngayChungTu} != null ? $F{ngayChungTu} : ""]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- Column Footer -->
    <columnFooter>
        <band height="10" splitType="Stretch"/>
    </columnFooter>

    <!-- Page Footer -->
    <pageFooter>
        <band height="30" splitType="Stretch">
            <textField>
                <reportElement x="680" y="10" width="100" height="15"/>
                <textElement textAlignment="Right">
                    <font fontName="Arial" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA["Trang " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report">
                <reportElement x="780" y="10" width="22" height="15"/>
                <textElement textAlignment="Left">
                    <font fontName="Arial" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[" / " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>

    <!-- Summary -->
    <summary>
        <band height="40" splitType="Stretch">
            <rectangle>
                <reportElement x="0" y="10" width="802" height="25" backcolor="#E8E8E8"/>
                <graphicElement>
                    <pen lineWidth="0.5"/>
                </graphicElement>
            </rectangle>
            <staticText>
                <reportElement x="480" y="15" width="100" height="15"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Arial" size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Tổng cộng:]]></text>
            </staticText>
            <textField pattern="#,##0.00">
                <reportElement x="580" y="15" width="100" height="15"/>
                <box>
                    <pen lineWidth="0.5"/>
                    <topPen lineWidth="0.5"/>
                    <leftPen lineWidth="0.5"/>
                    <bottomPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Arial" size="10" isBold="true"/>
                    <paragraph rightIndent="5"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{totalAmount}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport>